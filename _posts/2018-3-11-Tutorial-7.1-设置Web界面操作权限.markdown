---
layout: post
title:  "设置Web界面操作权限"
date:   2018-03-11
visible: 1
---

除了在数据层面设置权限控制外，您还可以在Web功能层面设置权限。通过前面的教程，您已经了解如何使用SiteMapStudio为Web页面创建各种菜单来实现界面操作功能。您也许需要在Web界面针对不同角色的用户显示不同的菜单项。例如，对“事务跟踪管理”系统，允许具有管理员角色的用户使用所有菜单项。而针对普通用户，则隐藏所有与系统管理相关的菜单功能，比如“表单设计器”等。

这个教程，我们介绍如何使用SiteMapStudio来设置Web界面菜单的权限，使得“系统设置”菜单下的所有菜单项只对系统管理员角色的用户显示。

* 从“开始” => Ebaas => SiteMapStudio打开SiteMapStudio工具， 登录为admin；
* 在打开的SiteMapStudio界面中选择左边“菜单栏” => “系统设置” => 右边选择“权限控制”选项卡，可以看到有一条继承的“Everyone”的权限规则，该规则允许所有人访问这个菜单功能，如下图所示:
<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限1.png' | prepend: site.baseurl }}" alt="">

首先，我们需要创建一条本地的“Everyone”规则覆盖继承的规则，并将权限修改为“拒绝”。

* 点击下方的“添加”按键 => 弹出“选择用户和角色”框 => 类型选择“角色” => 再选择名称“Everyone”的角色 => 单击“确认”按钮.如下图所示:

<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限2.png' | prepend: site.baseurl }}" alt=""><br>

在弹出的“确认”框，单击“是（y）”，如下图所示:
<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限3.png' | prepend: site.baseurl }}" alt=""><br>
“Everyo”隶属属性已改为“本地”，再单击“添加”按钮，添加“Administrator”用户，如下图所示:
<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限4.png' | prepend: site.baseurl }}" alt=""><br>
在弹出的“选择用户和角色”框，类型选择“角色”、名称“Administrator”，单击“确认”按钮，如下图所示:
<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限11.png' | prepend: site.baseurl }}" alt=""><br>
将“Administrator”权限设置为“允许”，删除“Everyone”用户，目的将“Everyone”本地权限改为“拒绝”，选中“Everyone”用户，单击“删除”，如下图所示:
<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限5.png' | prepend: site.baseurl }}" alt=""><br>
删除“Everyone”本地用户后，“Everyone”用户隶属属性变为“继承”，单击“添加”按钮，再把“Everyone”隶属属性改为“本地”，如下图所示:
<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限6.png' | prepend: site.baseurl }}" alt=""><br>
操作步骤和前述一致，最终结果如下图所示:
<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限7.png' | prepend: site.baseurl }}" alt=""><br>
单击工具栏“保存”图标，保存设置，如下图所示:
<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限8.png' | prepend: site.baseurl }}" alt=""><br>
重启“Ebaas server”。
验证用户权限，从浏览器输入：http://localhost:8080 用户:demo2,密码：888 登入，demo2用户没有管理员权限，登入进去后，看不到“系统设置”和“表单设计”图标，如下图所示:
<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限9.png' | prepend: site.baseurl }}" alt=""><br>
用户:demo1,密码：888 登入，demo1用户具有管理员权限，登入进去后，可以看到“系统设置”和“表单设计”图标，如下图所示:
<img src="{{'/assets/img/2018-3-11-设置Web界面操作权限10.png' | prepend: site.baseurl }}" alt=""><br>
