---
layout: post
title:  "配置批量数据导入"
date:   2018-03-05
visible: 1
---

前面教程介绍了使用表单添加数据记录的操作。假如，您有大量的数据需要输入到系统，可以使用Ebaas平台提供的批量导入数据的功能。批量导入的功能是通过数据导入向导来配置和执行的。数据导入向导类似于一个ETL工具，可用于从多种格式的文件中抽取数据，将其转换为所需的格式，并将其加载到数据库中。

下面，我们将介绍如何使用数据导入向导从一个文本文件将“事务”数据记录导入到“事务”数据类的过程。

#### 下载数据文件

为了节省您的时间，我们为您准备了一个已经包含多个事务数据的文本(CSV)文件。您可以点击下面的链接下载并保存：

[下载事务数据文件][1]

[1]:{{ site.url }}/assets/事务数据.csv

{% include note.html content="数据导入向导支持TXT，CSV，Excel等格式文件导入。特殊格式的文件需要编写导入转换器并进行配置。" %}

事务数据文件见下图：
<img src="{{'/assets/img/2018-3-5-配置批量数据导入0.png' | prepend: site.baseurl }}" alt=""><br>

#### 打开数据导入向导

数据导入向导是DesignStudio的一部分。首先打开DesignStudio。

然后，通过单击“文件”菜单下的“导入数据...”菜单项打开导入向导。如下图所示。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入1.png' | prepend: site.baseurl }}" alt=""><br>
在弹出的“连接数据库”窗口，选中“事务跟踪管理”数据模型 => 以admin用户身份登录 （admin用户的用户名是“admin”，默认密码是“admin”）。如下图所示。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入2.png' | prepend: site.baseurl }}" alt=""><br>
单击“确定”按钮，在弹出的“数据导入向导”面板中，单击“下一步”按钮，如下图所示。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入3.jpg' | prepend: site.baseurl }}" alt=""><br>

#### 选择导入文件

在向导的第一步中 => "数据源类型"选择“文本文件(txt)”（CSV是文本格式），然后单击“文件名”右边的“...”按钮，如下图所示：
<img src="{{'/assets/img/2018-3-5-配置批量数据导入4.png' | prepend: site.baseurl }}" alt=""><br>
在弹出的窗口，选择前面步骤下载的文件，如下图所示。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入5.png' | prepend: site.baseurl }}" alt=""><br>
结果见下图，单击“下一步”按钮。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入6.png' | prepend: site.baseurl }}" alt=""><br>

#### 指定文件格式

向导的第二步是确定如何正确解析文件。<br>
在“数据导入向导”面板，“行分隔符”选择：{CR}{LF}，列分隔符选择：“逗号”，如下图所示。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入7.png' | prepend: site.baseurl }}" alt=""><br>

#### 预览提取的数据

向导的第三步是使用设置预览从文件中提取的数据，如下图所示。如果提取的数据看起来不正确，则可以返回上一步更改设置并重试。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入8.png' | prepend: site.baseurl }}" alt=""><br>

#### 数据转换

单击“目标数据类”下面“请点击选择一数据类”，如下图。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入9.png' | prepend: site.baseurl }}" alt=""><br>
在弹出的“选择导入的数据类”窗口，选择“事务”数据类作为目标类，如下图。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入10.png' | prepend: site.baseurl }}" alt=""><br>

然后，通过在“转换关系”列中单击“...”在源（提取的数据）与目标之间创建映射，如下图。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入11.png' | prepend: site.baseurl }}" alt=""><br>

弹出“变换对话框”中，单击选择左边“源数据”的“主题”选择框，然后再单击选择右边“目标数据”的“主题”选择框，两端会连接一根直线，将源属性映射到目标属性。如下图。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入12.png' | prepend: site.baseurl }}" alt=""><br>
其它属性映射连接依次类推，，如下图。
<img src="{{'/assets/img/2018-3-5-配置批量数据导入13.png' | prepend: site.baseurl }}" alt=""><br>

您也可以在此处编写一些脚本来将原始值转换或合并为所需的格式。

#### 预览转换后的数据

向导的第五步允许您检查和验证转换后的数据（请参见图7）。如果数据看起来不正确，则可以返回上一步进行更正。

#### 导入数据并保存导入脚本

在向导的第六步中，单击“下一步”按钮开始将转换后的数据导入数据库。

如果这是一个重复的任务，您可以通过为其配置一个名称来保存配置为导入包，如图8所示。您可以在下次执行任务时使用导入包，而不需要经过配置。
