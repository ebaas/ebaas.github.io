---
layout: post
title:  "Ebaas工作流简介"
date:   2018-03-20
visible: 1
---

前面的教程主要介绍构建企业应用软件的数据管理功能。然而，绝大多数企业的业务工作都是基于流程执行的。通过流程协调多个部门或多个角色的员工共同完成某项复杂的任务，确保执行任务的效率，质量等。这个情况在企业中非常普遍，包括订单流程，客户服务请求和仓库出入库流程等。例如，一个简单的事务跟踪管理系统也需要按照一定的顺序和业务规则由多人共同完成完成，包括提交人，处理人，审核人等。

Ebaas支持使用工作流程构建业务应用程序，以帮助企业自动化，简化和改进其业务流程。

您可以使用工作流程来增强对组织中问题解决流程的建模。您将使用Ebaas的WorkflowStudio工具构建一个简单的状态机工作流程来跟踪事务流程的进展。

其中，Newtera TDM平台中的“流程管理”模块就是通过Newtera Workflow来提供的。部分应用模块具有流程管理的需求。例如，试验项目规划、试验调度管理、试验数据质量控制和试验报告生成等。这些模块的流程管理功能就是通过使用Newtera Workflow来实现的。

我们现在来看Newtera Workflow的物理架构，也就是其组件和组件的部署，下图是物理结构图。从图中可以看出，Newtera Workflow支持C/S和B/S架构，其组件分布在客户端、服务器端和数据库端，分别为：

l  Workflow Studio：是Windows客户端，用于设计、管理和监视工作流。一般由系统管理员使用；

l  Workflow引擎：位于服务器端，提供执行工作流所需的环境和服务；

l  Web客户端：用于执行流程过程中所赋予的任务，面向一般用户使用；

l  数据库端：用于保存工作流的执行状态和追踪信息；

#### 相关术语：

l  业务流程(Business Process)：某一具体业务的流程，例如试验任务审批流程，试验大纲审批流程等；

l  工作流项目(Workflow Project)：用于组织管理与某个业务流程相关的多个工作流；

l  工作流(Workflow)：是一个业务流程的声明程序。工作流由一组活动以及活动之间的逻辑关系组成。与数据库类比，工作流有点类似数据库的表结构定义；

l  工作流实例(Workflow Instance)：某一工作流的具体运行实例。运行工作流时，由于工作流可以处于不同的状态，所以必须生成一个工作流实例来对应每一次运行. 一个工作流可以有多个实例。与数据库类比，工作流实例与工作流的关系类似于数据记录与数据库表之间的关系；

l  活动(Activity)：负责执行工作流所定义的各种操作。Newtera Workflow提供了许多通用和扩展活动，可用于构造各种工作流，并可通过添加扩展活动的方式来支持新的业务流程。我们会在第三章进一步介绍各种活动的功能；

l  事件(Event)：外部应用所产生的事件，用于驱动工作流实例的进行。比如，数据库操作事件等；

l  绑定数据实例（Bound Data Instance）：数据实例（Data Instance）是Newtera TDM数据库中数据类的数据记录。每个工作流实例在执行过程中通常要与Newtera TDM数据库中的某一数据实例进行绑定。工作流实例与数据实例绑定后，其活动可以读取或修改该数据实例的属性值，并依据该数据实例所产生的事件来驱动工作流实例的状态转换。每个工作流实例允许与零或一个数据实例绑定。

l  任务(Task)：但工作流实例执行中需要人工交互的情况下，由相应的活动创建任务并分配给指定的用户来执行；

l  表单(Form)：任务是通过表单的方式与指定的用户进行交互。表单的类型有两种：一种是系统自动生成的表单（下面简称表单），另一种是定制表单。默认情况下，用户使用自动表单来完成任务。工作流实例在执行过程中通常与一个数据实例绑定，自动表单是由Newtera TDM根据绑定数据实例的所具有的属性而自动生成的用户界面，用户通过该表单界面对数据实例进行手工修改。定制表单为系统的扩展提供了接口。

Newtera Workflow基本功能
l  创建工作流项目：只有系统管理员才能创建新的项目。

l  创建工作流：可以创建顺序工作流或状态机工作流。具有几十种活动可供创建工作流。

l  动态创建工作流的数据库表单：使用Design Studio动态地创建工作流中需要使用到的数据类，并由Newtera TDM引擎自动生成相应的表单。

l  动态定义数据库事件：通过使用Design Studio动态定义驱动工作流的事件，而无需编程。

l  观察工作流实例的运行情况：具有查询、自动监视、终止和删除的功能。

l  指定任务的代办规则。

l  保存工作流项目为文件：以便恢复和复制工作流。

l  设置工作流项目管理员：只有工作流项目的管理员才允许创建和修改工作流。

l  锁定项目：为了避免多个用户同时修改某一工作流项目，可以在修改期间锁定某一工作流项目。

l  打印工作流设计图形：便于编写流程文档和满足审批的需求。

l  工作流的启动：手工启动工作流或事件启动工作流。

l  可扩展活动的框架：允许编写扩展活动来完善工作流的功能。


#### 状态机工作流的特点

状态机工作流提供了一组状态。工作流程在初始状态下开始，并在达到完成状态时结束。国家之间的转换定义了行为。一般来说，状态机工作流程会对事件做出反应。事件的发生会导致工作流程转换到另一个状态。

状态机工作流的主要优点之一是能够通过工作流定义多条路径。您可以轻松地在状态机工作流程中包含循环和重新执行状态。

状态和转换的定义形成了状态机工作流的模型。工作流模型的多个工作流实例可以在运行时期间以不同的状态运行。每个工作流实例都代表一个执行过程中的进程，并且绑定到数据实例，如问题或订单。绑定通常发生在创建数据实例的事件触发工作流时。

工作流中的状态是进程需要进行任务分配，暂停和等待事件执行任务以进入下一个状态的状态。工作流任务的接收者通常通过基于Web或移动设备的表单与预定义操作（如“批准”或“拒绝”）进行交互。执行操作会将事件引发到工作流实例，导致它移动到下一个状态。

#### 事务跟踪流程

当您设计状态机工作流以对流程建模时，首要任务是确定流程中发生的步骤和转换以及流程中涉及的人员。一旦定义了逻辑，您就可以使用WorkflowStudio构建一个模拟业务流程的工作流程。

假设您确定跟踪问题涉及以下步骤：

一个团队收到这个问题，包括所有必要的信息。
经理决定是否处理这个问题。如果是这样，问题分配给所有者，并且过程继续。如果不是，则问题被取消，工作流程结束。
所有者收到问题。等到所有者解决它，工作流程结束。
通常，有一个步骤来检查问题是否被正确解决。如果是这样，这个问题就结束了。如果不是，问题又回到了提交人。为了简化本教程，我们跳过检查步骤。

在本教程中，您了解了创建和执行状态机工作流所涉及的基本概念。 您看到设计工作流程的第一步是准确地查看您正在建模的业务流程。 要创建更高级的工作流程，您应该阅读涵盖Ebaas工作流程高级主题的教程。


